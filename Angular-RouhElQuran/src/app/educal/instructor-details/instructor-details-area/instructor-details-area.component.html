<section class="teacher__area pt-100 pb-110">
  <div class="page__title-shape">
     <img class="page-title-shape-5 d-none d-sm-block" src="assets/img/page-title/page-title-shape-1.png" alt="">
     <img class="page-title-shape-6" src="assets/img/page-title/page-title-shape-6.png" alt="">
     <img class="page-title-shape-3" src="assets/img/page-title/page-title-shape-3.png" alt="">
     <img class="page-title-shape-7" src="assets/img/page-title/page-title-shape-4.png" alt="">
  </div>
  <div class="container">
    <div class="course__btn">
                           <a [routerLink]="['/']" class="link-btn">
                           Back To Home 
                           <i class="far fa-arrow-left"></i>
                           <i class="far fa-arrow-left"></i>
                           </a>
                        </div>
     <div class="row">
        <div class="col-xxl-4 col-xl-4 col-lg-4 col-md-6">
           <div class="teacher__details-thumb p-relative w-img pr-30">
              <img 
               [src]="instructorData.fileName.length > 0 ? apiUrl + '/Files/' + instructorData?.fileName[0] : 'assets/img/teacher/teacher-default.png'" 
               [alt]="instructorData.instructorFirstName + ' ' + instructorData.instructorLastName"
               class="instructor-image"
               loading="lazy">

              <div class="teacher__details-shape">
                 <img class="teacher-details-shape-1" src="assets/img/teacher/details/shape/shape-1.png" alt="">
                 <img class="teacher-details-shape-2" src="assets/img/teacher/details/shape/shape-2.png" alt="">
              </div>
           </div>


                <div class="course__comment mb-75 mt-75">
                    <h3>{{ instructorData.userReview[0]?.coursereviewCount }}  Comments</h3>

                    <ul >
                      <li *ngFor="let InstructorReview of instructorData.userReview">
                        <div class="course__comment-box">
                          <div class="course__comment-thumb float-start">
                          <div
                            [ngClass]="getAvatarColor(InstructorReview.userName.charAt(0)) + ' rounded-circle text-white d-flex align-items-center justify-content-center'"
                            style="width: 50px; height: 50px; font-size: 20px;"
                          >
                            {{ InstructorReview.userName.charAt(0) }}
                          </div>
                          </div>
                          <div class="course__comment-content">
                            <div class="course__comment-wrapper ml-70 fix">
                              <div class="course__comment-info float-start">
                                <h4 _ngcontent-lfx-c71>{{InstructorReview.userName}}</h4>
                                <span _ngcontent-lfx-c71>{{InstructorReview.reviewDate}}</span>
                              </div>
                             <div  _ngcontent-lfx-c71 class="course__comment-rating float-start float-sm-end">
                                <ul>
                                  <li *ngFor="let star of [].constructor(InstructorReview.rating)">
                                    <a href="#" ><i class="icon_star"></i></a>
                                  </li>
                                </ul>
                              </div>
                            </div>
                            <div _ngcontent-lfx-c71 class="course__comment-text ml-70">
                              <p>
                               {{InstructorReview.comment}}
                              </p>
                            </div>
                          </div>
                        </div>
                      </li>
                 
                    </ul>
                  </div>
                    <div class="course__form">
                   <form [formGroup]="ReviewForm" (ngSubmit)="addInstructorReview()">
                    <div class="course__form-rating">
                      <span>Rating:</span>
                  <ul class="star-rating" (mouseleave)="resetHover()">
                  <li *ngFor="let star of stars; let i = index"
                      (click)="setRating(i + 1)"
                      (mouseenter)="hoverRating = i + 1">
                    <i class="icon_star" [class.selected]="(i < (hoverRating || ReviewForm.get('rate')?.value))"></i>
                  </li>
                </ul>
                     <div *ngIf="ReviewForm.get('rate')?.invalid && ReviewForm.get('rate')?.touched" class="text-danger">
                        Rating is required
                      </div>
                    </div>

                    <div class="course__form-input">
                  <textarea formControlName="reviewSummary" placeholder="Review Summary" class="form-control"></textarea>

                  <div *ngIf="ReviewForm.get('reviewSummary')?.errors && ReviewForm.get('reviewSummary')?.touched">
                    <div *ngIf="ReviewForm.get('reviewSummary')?.getError('required')" class="alert alert-danger mt-2 p-2">
                      <strong>Error:</strong> Summary is required
                    </div>
                    <div *ngIf="ReviewForm.get('reviewSummary')?.getError('specialChars')" class="alert alert-warning mt-2 p-2">
                      <strong>Warning:</strong> Summary must not contain special characters
                    </div>
                  
                  </div>
                </div>


                    <div class="course__form-btn mt-10 mb-55">
                      <button type="submit" class="e-btn">Submit Review</button>
                    </div>
                  </form>

                   
                  </div>
                 <div *ngIf="responseMessage"
                    [ngClass]="{ 'alert': true, 'alert-success': isSuccess, 'alert-danger': !isSuccess }"
                    [style.backgroundColor]="isSuccess ? '#d4edda' : '#f8d7da'"
                    [style.color]="isSuccess ? '#155724' : '#721c24'"
                    class="mt-3">
                  {{ responseMessage }}
                </div>
        </div>
        <div class="col-xxl-8 col-xl-8 col-lg-8">
           <div class="teacher__wrapper">
              <div class="teacher__top d-md-flex align-items-end justify-content-between">
                 <div class="teacher__info">
                    <h4>{{instructorData?.instructorFirstName}}{{instructorData?.instructorLastName}}</h4>
                    <!-- <span>{{instructorData.}}</span> التخصص--> 
                    <span>{{instructorData?.certificate}}</span>  

                 </div>
                 <div class="teacher__rating">
                    <h5>Review:</h5>
                      <div class="course__rating-inner d-flex align-items-center">
                  <ul>
                          <li *ngFor="let star of [].constructor(instructorData.avergRate)">
                            <a href="#"><i class="icon_star"></i></a>
                          </li>
                        </ul>
                     <p>{{instructorData.avergRate}}</p>
                  </div>
                 </div>
                 <div class="teacher__social-2">
                    <h4>Follow Us:</h4>
                    <ul>
                       <li>
                          <a href="#">
                             <i class="social_facebook"></i>
                          </a>
                       </li>
                       <li>
                          <a href="#">
                             <i class="social_twitter ms-2"></i>
                          </a>
                       </li>
                       <li>
                          <a href="#">
                             <i class="social_vimeo ms-2"></i>
                          </a>
                       </li>
                       <li>
                          <a href="#">
                             <i class="social_linkedin ms-2"></i>
                          </a>
                       </li>
                    </ul>
                 </div>
                 <div class="teacher__follow mb-5">
                    <a href="#" class="teacher__follow-btn">follow <i class="icon_plus"></i> </a>
                 </div>
              </div>
              <div class="teacher__bio">
                 <h3>Short Bio</h3>
                 <p>{{instructorData?.description}}</p>
              </div>
              <div class="teacher__courses pt-55">
                 <div class="section__title-wrapper mb-30">
                    <h2 class="section__title">Teacher <span class="yellow-bg yellow-bg-big">Course<img src="assets/img/shape/yellow-bg.png" alt=""></span></h2>
                 </div>

                         
  <div class="teacher__course-wrapper">
                <div>
               <div class="row">
                  <div class="col-xxl-6 col-xl-6 col-lg-6 col-md-6"*ngFor="let course of instructorData?.courseDtos">
                     <div class="course__item white-bg mb-30 fix">
                     <div class="course__thumb w-img p-relative fix">
                        <a [routerLink]="['/course-details', course.id]">
                         <img 
                                    *ngFor="let file of course?.fileName"
                                    [src]="buildImageUrl(file)"
                                    [alt]="course.courseName"
                                    _ngcontent-bkt-c82
                                     style="height: 300px;"
                               >
                        </a>
                        <div class="course__tag">
                           <a href="#">{{ course.specialty }}</a>
                        </div>
                     </div>
                     <div class="course__content">
                        <div class="course__meta d-flex align-items-center justify-content-between">
                           <div class="course__lesson">
                           <span><i class="far fa-book-alt"></i>{{ course.coursesTime }} Lesson</span>
                           </div>
                           <div class="course__rating">
                           <span><i class="icon_star"></i>{{course.avergRate}}</span>
                           </div>
                        </div>
                        <h3 class="course__title">
                           <a [routerLink]="['/course-details', course.id]">{{ course.courseName }}</a>
                        </h3>
                      
                     </div>
                     <div class="course__more d-flex justify-content-between align-items-center">
                        <div class="course__status d-flex align-items-center">
                           <span>${{ course.coursePrice }}</span>
                           <span class="old-price">${{ course.coursePrice }}</span>
                        </div>
                        <div class="course__btn">
                           <a [routerLink]="['/course-details', course.id]" class="link-btn">
                           Know Details
                           <i class="far fa-arrow-right"></i>
                           <i class="far fa-arrow-right"></i>
                           </a>
                        </div>
                     </div>
                     </div>
                  </div>
               </div>
</div>

                 </div>
               

              </div>
           </div>
        </div>
     </div>
  </div>
</section>
